CREATE OR REPLACE PROCEDURE CHK_SAL2
(P_EID EMP.EMPLOYEE_ID%TYPE ,P_SAL EMP.SALARY%TYPE,P_HDATE EMP.HIRE_DATE%TYPE)
IS
	PRAGMA AUTONOMOUS_TRANSACTION;
	V_MINSAL EMP.SALARY%TYPE;
	V_MAXSAL EMP.SALARY%TYPE;
BEGIN
	SELECT MIN(SALARY), MAX(SALARY) 
	INTO V_MINSAL , V_MAXSAL
	FROM EMP
	WHERE TO_CHAR(HIRE_DATE,'YY') = TO_CHAR(P_HDATE,'YY');
	
	IF NVL(P_SAL,0) NOT BETWEEN V_MINSAL AND V_MAXSAL THEN
		RAISE_APPLICATION_ERROR(-20001,'SALARY MUST BE BETWEEN' || V_MINSAL || ' AND ' || V_MAXSAL);
	END IF;
	EXCEPTION 
		WHEN NO_DATA_FOUND THEN
			RAISE_APPLICATION_ERROR(-20002,'NO SUCH JOB EXISTS IN EMP TABLE');
END;
/