-- EXMAPLE OR PROCEDURE WITH IN PARAMETER

-- RAISE_SALARY(7788,30) 
CREATE OR REPLACE PROCEDURE RAISE_SALARY                                                                                                                                                                                                                                                                                      
(P_EMPNO IN MPSEMP.EMPNO%TYPE, P_INCR_PERC NUMBER) /* WE CAN'T SPECIFY SIZE FOR STATIC DECLARATION */                                                                                                                                                                                                       
-- FORMAL PARAMETER DECLARATION , IN IS DEFAULT MODE FOR PARAM.                                                                                                                                                                                                                                             
IS     -- AS      -- STARTING POINT FOR DECLARATION PART                                                                                                                                                                                                                                                    
--	PRAGMA AUTONOMOUS_TRANSACTION;                                                                                                                                                                                                                                                                             
	V_COUNT NUMBER(4) DEFAULT 0;                                                                                                                                                                                                                                                                               
	V_SAL MPSEMP.SAL%TYPE;                                                                                                                                                                                                                                                                                     
	--DECLARATION PART FOR LOCAL IDENTIFIERS ENDS HERE                                                                                                                                                                                                                                                        
BEGIN                                                                                                                                                                                                                                                                                                       
/*    SELECT COUNT(*)                                                                                                                                                                                                                                                                                       
	INTO V_COUNT                                                                                                                                                                                                                                                                                               
	FROM DUAL;  */                                                                                                                                                                                                                                                                                             
	SELECT COUNT(*) INTO V_COUNT FROM MPSEMP WHERE EMPNO = P_EMPNO;                                                                                                                                                                                                                                            
	IF V_COUNT <> 1 THEN                                                                                                                                                                                                                                                                                       
		RAISE_APPLICATION_ERROR(-20457,'SUPPLIED EMPLOYEE NUMBER MAY NOT EXIST OR DUPLICATE IN TABLE.');                                                                                                                                                                                                          
	END IF;                                                                                                                                                                                                                                                                                                    
	SELECT SAL INTO V_SAL FROM MPSEMP WHERE EMPNO = P_EMPNO;                                                                                                                                                                                                                                                   
--	DOPL('ORIGINAL SALARY : ' || V_SAL);                                                                                                                                                                                                                                                                       
	UPDATE MPSEMP                                                                                                                                                                                                                                                                                              
	SET SAL  = SAL + (V_SAL * P_INCR_PERC / 100)                                                                                                                                                                                                                                                               
	WHERE EMPNO = P_EMPNO;                                                                                                                                                                                                                                                                                     
--	SELECT SAL INTO V_SAL FROM MPSEMP WHERE EMPNO = P_EMPNO;                                                                                                                                                                                                                                                   
--	DOPL('NEW SALARY : ' || V_SAL);                                                                                                                                                                                                                                                                            
--    DOPL(V_COUNT);                                                                                                                                                                                                                                                                                        
/*	IF SQL%ROWCOUNT = 0 THEN                                                                                                                                                                                                                                                                                 
		DOPL('NO SUCH EMPLOYEE EXISTS.');                                                                                                                                                                                                                                                                         
	END IF;  */                                                                                                                                                                                                                                                                                                
--	COMMIT;                                                                                                                                                                                                                                                                                                    
END;                                                                                                                                                                                                                                                                                                        
/